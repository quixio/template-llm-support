<mat-form-field appearance="outline" [class.mat-focused]="menuTrigger?.menuOpen" 
  class="w-100 cursor-pointer mb-0 mt-2 p-0" [matMenuTriggerFor]="menu" (menuOpened)="prepareMenu()">
  <mat-label>Messages source</mat-label>
  <input matInput [value]="selectedRoom" class="pe-none" readonly>
  <mat-icon matSuffix>{{ menuTrigger?.menuOpen ? 'keyboard_arrow_down' : 'keyboard_arrow_up' }}</mat-icon>
</mat-form-field>

<mat-menu #menu="matMenu" class="dropdown bg-white">
  <!-- Title option -->
	<button
    mat-menu-item
    disabled
    (click)="$event.preventDefault()"
    class="px-4 py-2">
    <span class="mat-caption text-uppercase text-muted fw-bold text-truncate">Quix</span>
  </button>

  <cdk-virtual-scroll-viewport *ngIf="!isLoadingChannels" itemSize="100" [style.height.px]="(50 * channels.length) < 250 ? (50 * channels.length) : 250" twitchWrapper>
    <button mat-menu-item fxLayout="row" fxLayoutAlign="start center" class="bg-white px-4 py-2" *ngFor="let channel of channels" [class.selected]="selectedRoom === channel.streamId" (click)="changeRoom(channel.streamId, true)"> 
      <div fxLayoutAlign="center center" class="rounded-circle overflow-hidden me-2" [class._custom-chat-room]="storedRooms.includes(channel.streamId!)">
        <img [src]="channel.profilePic" height="32" *ngIf="channel.profilePic">
        <img src="assets/quix-logo-blue.svg" height="32" *ngIf="channel.streamId === QuixChatRoom">
        <mat-icon class="text-white material-icons-outlined me-0" *ngIf="storedRooms.includes(channel.streamId!)">forum</mat-icon>
      </div>
      <div fxLayout="column">
        <span class="fw-bold">{{ channel.streamId }}</span>
        <span>{{ channel.game }}</span>
      </div> 
    </button>
  </cdk-virtual-scroll-viewport>

  <button mat-menu-item class="bg-white px-4 py-2" (click)="openCreateChatroomDialog()">
    <a class="mat-body-2 fw-bold text-primary-light">+ New chat room</a>
  </button>

</mat-menu>